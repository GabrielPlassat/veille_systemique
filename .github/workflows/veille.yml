name: R√©cup√©ration automatique de la veille

on:
  schedule:
    - cron: '0 10 * * 1'  # Chaque lundi √† 12h heure de Paris (10h UTC)
  workflow_dispatch:

jobs:
  fetch_veille:
    runs-on: ubuntu-latest

    steps:
      - name: Cloner le d√©p√¥t
        uses: actions/checkout@v3

      - name: T√©l√©charger la veille depuis veille_contenu
        run: |
          mkdir -p veille
          FILENAME="veille-$(date '+%Y-%m-%d').md"
          URL="https://raw.githubusercontent.com/GabrielPlassat/veille_contenu/main/$FILENAME"
          echo "T√©l√©chargement de $URL"
          curl -f -o "veille/$FILENAME" "$URL" || echo "‚ö†Ô∏è Fichier non trouv√© pour aujourd'hui"

      - name: Commit et push
        run: |
          git config user.name "github-actions"
          git config user.email "github-actions@github.com"
          git add veille/
          git commit -m "üîÅ Ajout automatique de la veille du $(date '+%Y-%m-%d')" || echo "Rien √† committer"
          git push
